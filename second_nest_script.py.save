
import matplotlib.pyplot as plt
import nest
neuron = nest.Create("iaf_psc_alpha")
neuron.get("I_e")
neuron.get(["V_reset", "V_th"])
neuron.set(I_e=476.0)

neuron2 = nest.Create("iaf_psc_alpha")
neuron2.set({"I_e": 370.0})


multimeter = nest.Create("multimeter")
multimeter.set(record_from=["V_m"])
spikerecorder = nest.Create("spike_recorder")
nest.Connect(multimeter, neuron)
nest.Connect(multimeter, neuron2)

nest.Connect(neuron, spikerecorder)
nest.Simulate(1000.0)

dmm = multimeter.get()
Vms = dmm["events"]["V_m"]
ts = dmm["events"]["times"]
plt.figure(1)
plt.plot(ts, Vms)

plt.xlabel("Время (мс)")
plt.ylabel("Мембранный потенциал (мВ)")
plt.title("Мембранный потенциал одного нейрона")
plt.grid(True)
# Сохраняем первую фигуру в файл
plt.savefig("membrane_potential.png")

events = spikerecorder.get("events")
senders = events["senders"]
ts = events["times"]
plt.figure(2)
plt.plot(ts, senders, ".")
plt.xlabel("Время (мс)")
plt.ylabel("Идентификатор нейрона (GID)")
plt.title("Спайки одного нейрона")
plt.grid(True)
# Сохраняем вторую фигуру в файл
plt.savefig("spikes_raster_plot.png")

